From f8af9a180f25ad39a938b6c9241444c38a9b286d Mon Sep 17 00:00:00 2001
From: Matthieu Crapet <mcrapet@gmail.com>
Date: Wed, 14 Jan 2009 13:27:31 +0100
Subject: [PATCH 07/22] ep93xx_cpuinfo

---
 arch/arm/kernel/setup.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/arch/arm/kernel/setup.c b/arch/arm/kernel/setup.c
index 2ca7038..53d3c44 100644
--- a/arch/arm/kernel/setup.c
+++ b/arch/arm/kernel/setup.c
@@ -994,9 +994,17 @@ static int c_show(struct seq_file *m, void *v)
 	seq_puts(m, "\n");
 
 	seq_printf(m, "Hardware\t: %s\n", machine_name);
+	#if defined(CONFIG_ARCH_EP93XX)
+	#include <mach/ep93xx-regs.h>
+	seq_printf(m, "Revision\t: %04x\n",
+	      *((unsigned int *)EP93XX_SYSCON_CHIPID) >> 28);
+	seq_printf(m, "Serial\t\t: %016x\n",
+	      *((unsigned int *)EP93XX_SECURITY_UNIQID));
+	#else
 	seq_printf(m, "Revision\t: %04x\n", system_rev);
 	seq_printf(m, "Serial\t\t: %08x%08x\n",
 		   system_serial_high, system_serial_low);
+	#endif
 
 	return 0;
 }
-- 
1.5.6.5

